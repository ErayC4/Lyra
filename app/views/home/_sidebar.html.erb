<style>
    button{
        background-color: transparent;
        border: none;
    }
    .logo{
        width: 32px;
        height: 32px;
        object-fit: cover;
        object-position: center;
    }
    .logo-container:hover{
        background-color: rgb(235,235,235);
    }
    .logo-container {
        display: flex;
        align-items: center;
        border-radius: 6px;
        padding: 8px;
        width: 100%;
        cursor: pointer;
    }
    .sidebar-header{
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px;
        gap: 8px;
    }
    .close-sidebar-button{
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .button-text {
        font-size: 14px;
    }
    .sidebar{
        height: calc(100vh);
        width: 240px;
        padding: 8px;
        background-color: #FAFAFA;
        border-right: 1px solid rgb(228, 228, 231);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: width 0.3s ease-out, opacity 0.3s ease-out;
        box-sizing: border-box;
        
    }
    .sidebar-item-container{
        display: flex;
        padding: 0 8px;
        flex-direction: column;
        cursor: pointer;
    }
    .sidebar-item{
        display: grid;
        align-items: center;
        grid-template-columns: 1fr 32px;
        gap: 4px;
        border-radius: 6px;
    }
    
    .sidebar-button-big{
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
        max-height: 32px;
    }

    .sidebar-expand-button, .sidebar-close-button{
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border-radius: 6px;
        cursor: pointer;
    }

    .sidebar-button-small{
        display: flex;
        align-items: center;
        width: 100%;
        gap: 8px;
        height: 28px;
        border-radius: 6px;
        cursor: pointer;
    }
    .sidebar-button-small:hover {
        background-color: rgb(235, 235, 235);
    }

    .sidebar-close-button:hover {
        background-color: rgb(235, 235, 235);
    }

    .sidebar-item:hover{
        background-color: rgb(235,235,235);
    }
    .sidebar-expand-button:hover{
        background-color: rgb(225,225,225);
    }
    .expanded-sidebar-items {
    display: flex;
    flex-direction: column;
    margin: 0 14px;
    padding: 0 10px;
    border-left: 1px solid rgb(229, 231, 235);
    gap: 4px;
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transform: scaleY(0);
    transform-origin: top;
        transition: max-height 0.2s ease-out, opacity 0.2s ease-out, 
                    transform 0.2s ease-out, padding 0.2s ease-out;
    }

    .expanded-sidebar-items.open {
        max-height: 300px;
        opacity: 1;
        transform: scaleY(1);
        padding: 2px 10px;
    }
    .sidebar-expand-button svg {
      transition: transform 0.3s ease;
    }
    .profile-buttons{
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding: 8px;
    }

    .profile-container{
        display: flex;
        align-items: center;
        padding: 8px; 
        gap: 8px;
        border-radius: 8px;
        margin: 8px;
        cursor: pointer;
    }
    .profile-container:hover{
        background-color: rgb(235,235,235);
    }
    .profile-picture{
        width: 32px;
        height: 32px;
        object-fit: cover;
        object-position: center;
        border-radius: 6px;
    }
    .sidebar-button-big:hover{
        background-color: rgb(235,235,235);
    }
    .minimized{
        width: 64px;
        overflow: hidden;
        transition: width 0.3s ease-out, opacity 0.3s ease-out;
    }
    .profile-container{
        transition: margin 0.2s ease-out, opacity 0.3s ease-out;
    }
    
    /* Anfänglicher Zustand für minimierte Sidebar */
    .minimized .button-text {
        display: none;
    }
    .minimized .sidebar-expand-button {
        display: none;
    }
    .minimized .logo-container {
        display: none;
    }
    .minimized .profile-information {
        display: none;
    }
    .minimized .profile-container {
        margin: 0;
        margin-bottom: 9px;
        margin-top: 8px;
    }
</style>
<script>
    // Wait for the DOM to be fully loaded
document.addEventListener('DOMContentLoaded', function() {
  // Expand/collapse functionality for sections
  const expandButtons = document.querySelectorAll('.sidebar-expand-button');
  
  // Add click event listener to each expand button
  expandButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Find the closest parent container
      const container = this.closest('.sidebar-item-container');
      
      // Find the expanded items section within this container
      const expandedItems = container.querySelector('.expanded-sidebar-items');
      
      // Toggle the visibility with class
      expandedItems.classList.toggle('open');
      
      // Toggle the chevron rotation
      if (expandedItems.classList.contains('open')) {
        this.querySelector('svg').style.transform = 'rotate(180deg)';
      } else {
        this.querySelector('svg').style.transform = 'rotate(0deg)';
      }
    });
  });
  
  // Minimize/Maximize sidebar functionality
  const sidebarCloseButton = document.querySelector('.sidebar-close-button');
  const sidebar = document.querySelector('.sidebar');
  
  // Funktion zum Aktualisieren des Sidebar-Status
  function updateSidebarStatus() {
    if (sidebar && sidebar.classList.contains('minimized')) {
        // Wenn die Sidebar minimiert ist
        document.querySelectorAll(".button-text").forEach(element => {
            element.style.display = 'none';
        });
        document.querySelectorAll('.expanded-sidebar-items.open').forEach(item => {
            item.classList.remove('open');
        });
        document.querySelectorAll('.sidebar-expand-button svg').forEach(svg => {
            svg.style.transform = 'rotate(0deg)';
        });
        document.querySelectorAll(".sidebar-expand-button").forEach(element => {
            element.style.display = 'none';
        });
        document.querySelector(".logo-container").style.display = 'none';
        document.querySelector(".profile-container").style.margin = '0';
        document.querySelector(".profile-container").style.marginBottom = '9px';
        document.querySelector(".profile-container").style.marginTop = '8px';
        document.querySelector(".profile-container").style.padding = '8px;';
        document.querySelector(".profile-information").style.display = 'none';
    } else {
        // Wenn die Sidebar nicht minimiert ist
        document.querySelectorAll(".button-text").forEach(element => {
            element.style.display = '';
        });
        document.querySelectorAll(".sidebar-expand-button").forEach(element => {
            element.style.display = '';
        });
        document.querySelector(".logo-container").style.display = '';
        document.querySelector(".profile-information").style.display = '';
        document.querySelector(".profile-container").style.margin = '8px';
    }
  }
  
  // Setze Sidebar beim Laden auf minimiert (nicht mehr nötig, da bereits in HTML minimiert)
  // sidebar.classList.add('minimized');
  
  // Das Icon ist bereits im HTML richtig gesetzt
  // Ändere das Icon entsprechend (zeige "öffnen" Icon)
  // const buttonIcon = sidebarCloseButton.querySelector('svg');
  // buttonIcon.outerHTML = '...';
  
  // Die anfängliche Anzeige wird jetzt über CSS gesteuert
  // updateSidebarStatus();
  
  sidebarCloseButton.addEventListener('click', function() {
    // Toggle minimized state
    sidebar.classList.toggle('minimized');
    
    updateSidebarStatus();

    // Change close button icon to open when minimized
    const buttonIcon = this.querySelector('svg');
    
    if (sidebar.classList.contains('minimized')) {
      // Change icon to show "open panel" icon
      buttonIcon.outerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-right-close-icon"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18"/><path d="m8 9 3 3-3 3"/></svg>';
    } else {
      // Change back to "close panel" icon
      buttonIcon.outerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-right-open-icon lucide-panel-right-open"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18"/><path d="m10 15-3-3 3-3"/></svg>';
    }
  });
});
</script>
<div class="sidebar minimized">
    <div class="sidebar-top">
        <div class="sidebar-header">
            <div class="logo-container">
                <img src="https://cdn-dynmedia-1.microsoft.com/is/content/microsoftcorp/Icon-viva-learning?resMode=sharp2&op_usm=1.5,0.65,15,0&qlt=85" class="logo">
                <div class="app-information">
                    <p class="button-text" style="font-weight: bold; padding: 0 8px;">AppName</p>
                    <p style="font-size: 12px; padding: 0 8px; color: rgba(63, 63, 70, 0.7);">Beta v1.0.1</p>
                </div>
            </div>
            <button class="sidebar-close-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-right-close-icon"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M15 3v18"/><path d="m8 9 3 3-3 3"/></svg>
            </button>
        </div>
        <div class="sidebar-item-container">
            <div class="sidebar-item">
                <button class="sidebar-button-big" onclick="window.location.href='<%= notes_path %>'">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-notebook-pen-icon lucide-notebook-pen"><path d="M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4"/><path d="M2 6h4"/><path d="M2 10h4"/><path d="M2 14h4"/><path d="M2 18h4"/><path d="M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z"/></svg>
                    <p class="button-text">Notes</p> 
                </button>
                <button class="sidebar-expand-button" onclick="event.stopPropagation();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down-icon lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                </button>
            </div>
            <div class="expanded-sidebar-items">
                <p style="font-size: 12px; padding: 0 8px; color: rgba(63, 63, 70, 0.7);">Recently Viewed</p>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-icon lucide-file"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>
                    <p class="button-text">RubyOnRails</p> 
                </button>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-icon lucide-file"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/></svg>
                    <p class="button-text">How to cümbül</p> 
                </button>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder-icon lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg>
                    <p class="button-text">Mathe</p> 
                </button>
                
            </div>
        </div>

        <div class="sidebar-item-container">
            <div class="sidebar-item" onclick="window.location.href='<%= courses_path %>'">
                <button class="sidebar-button-big">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap-icon lucide-graduation-cap"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>
                    <p class="button-text">Courses</p> 
                </button>
                <button class="sidebar-expand-button" onclick="event.stopPropagation();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down-icon lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>
                </button>
            </div>
            <div class="expanded-sidebar-items">
                <p style="font-size: 12px; padding: 0 8px; color: rgba(63, 63, 70, 0.7);">Recently Viewed</p>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open-icon lucide-book-open"><path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
                    <p class="button-text">How to build A Robot</p> 
                </button>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open-icon lucide-book-open"><path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
                    <p class="button-text">Linear Algebra</p> 
                </button>
                <button class="sidebar-button-small">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open-icon lucide-book-open"><path d="M12 7v14"/><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
                    <p class="button-text">Binary Trees</p> 
                </button>
            </div>
        </div>
        <div class="sidebar-item-container">
            <div class="sidebar-item">
                <button class="sidebar-button-big" onclick="window.location.href='<%= tasks_path %>'">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days-icon lucide-calendar-days"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
                    <p class="button-text">Calender</p> 
                </button>
            </div>
        </div>
    </div>
    <div class="sidebar-bottom">
        <div class="profile-buttons">
            <button class="sidebar-button-big">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-help-icon lucide-circle-help"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg>
                <p class="button-text">Get Help</p> 
            </button>

            <button class="sidebar-button-big">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-cog-icon lucide-user-cog"><path d="M10 15H6a4 4 0 0 0-4 4v2"/><path d="m14.305 16.53.923-.382"/><path d="m15.228 13.852-.923-.383"/><path d="m16.852 12.228-.383-.923"/><path d="m16.852 17.772-.383.924"/><path d="m19.148 12.228.383-.923"/><path d="m19.53 18.696-.382-.924"/><path d="m20.772 13.852.924-.383"/><path d="m20.772 16.148.924.383"/><circle cx="18" cy="15" r="3"/><circle cx="9" cy="7" r="4"/></svg>
                <p class="button-text">Accout Settings</p> 
            </button>

            <%= button_to destroy_user_session_path, method: :delete, class: "sidebar-button-big", data: { confirm: "Wirklich ausloggen?" } do %>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out-icon lucide-log-out">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
        <polyline points="16 17 21 12 16 7"/>
        <line x1="21" x2="9" y1="12" y2="12"/>
    </svg>
    <p class="button-text">Logout</p>
<% end %>
        </div>
        <div class="profile-container">
            <img src="https://ui.shadcn.com/avatars/shadcn.jpg" class="profile-picture">
            <div class="profile-information">
                <p style="font-size: 14px; font-weight: bold;">Shitting Mypants</p>
                <p style="font-size: 12px; ">shittmypants@socks.com</p>
            </div>
        </div>
    </div>
    
</div>